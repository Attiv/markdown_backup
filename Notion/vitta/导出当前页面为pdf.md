  

[转自](http://www.jianshu.com/p/570c84ee2e8d)

```Plain
function generalPDFFunc(canvas) {
        var contentWidth = canvas.width;
        var contentHeight = canvas.height;

        //One page pdf shows the height of the canvas generated by the html page;
        var pageHeight = contentWidth / 592.28 * 841.89;
        //The html which is not generate pdf page height
        var leftHeight = contentHeight;
        //Page offset
        var position = 0;
        //A4 paper size [595.28,841.89], html page generated canvas in pdf picture width
        var imgWidth = 595.28;
        var imgHeight = 592.28 / contentWidth * contentHeight;
        var pageData = canvas.toDataURL('image/jpeg');

        var img = new Image();
        img.src = pageData;
        var pdf = new jsPDF('', 'pt', 'a4');

        //There are two heights that need to be distinguished, one is the actual height of the html page, and the page height of the generated pdf (841.89)
        //When the content does not exceed the pdf page display range, no paging is required
        if (leftHeight < pageHeight) {
          pdf.addImage(pageData, 'JPEG', 0, 10, imgWidth, imgHeight);
        } else {
          while (leftHeight > 0) {
            pdf.addImage(pageData, 'JPEG', 0, 10 + position, imgWidth, imgHeight);
            leftHeight -= pageHeight;
            position -= 841.89;
            //Avoid adding blank pages
            if (leftHeight > 0) {
              pdf.addPage();
            }
          }
        }

//        pdf.save('statement.pdf');
        pdf.output('dataurlnewwindow');
      }

      function downLoadPDF() {
        html2canvas($("\#pdfPage"), {
          scale: 2,
          onrendered: generalPDFFunc
        });
      }
```

如果想增加图片的分辨率的话可以[参考](https://github.com/niklasvh/html2canvas/pull/1087)  
需要注意的是加载  
`jspdf` 要在 `html2canvas` 之前, 不然`onrendered`会使用`jspdf`的.